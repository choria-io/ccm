<!doctype html><html lang=en-us dir=ltr itemscope itemtype=http://schema.org/Article data-r-output-format=html><head><meta charset=utf-8><meta name=viewport content="height=device-height,width=device-width,initial-scale=1,minimum-scale=1"><meta name=generator content="Hugo 0.152.2"><meta name=generator content="Relearn 8.3.0"><meta name=description content="Overview Mainstream Configuration Management systems focus on full-system management, optimized for hundreds or thousands of managed resources per node. This makes them complex and dependency-heavy.
Traditional Configuration Management tools are not well suited for application managementâ€”they focus on systems management. They also struggle with ad hoc systems where each node is a unique snowflake.
CCM is a small-scale Configuration Management system designed to meet users where they are:"><meta name=author content><meta name=twitter:card content="summary"><meta name=twitter:title content="Choria Configuration Manager"><meta name=twitter:description content="Overview Mainstream Configuration Management systems focus on full-system management, optimized for hundreds or thousands of managed resources per node. This makes them complex and dependency-heavy.
Traditional Configuration Management tools are not well suited for application managementâ€”they focus on systems management. They also struggle with ad hoc systems where each node is a unique snowflake.
CCM is a small-scale Configuration Management system designed to meet users where they are:"><meta property="og:url" content="https://choria-cm.dev/index.html"><meta property="og:site_name" content="Choria Configuration Manager"><meta property="og:title" content="Choria Configuration Manager"><meta property="og:description" content="Overview Mainstream Configuration Management systems focus on full-system management, optimized for hundreds or thousands of managed resources per node. This makes them complex and dependency-heavy.
Traditional Configuration Management tools are not well suited for application managementâ€”they focus on systems management. They also struggle with ad hoc systems where each node is a unique snowflake.
CCM is a small-scale Configuration Management system designed to meet users where they are:"><meta property="og:locale" content="en_us"><meta property="og:type" content="website"><meta itemprop=name content="Choria Configuration Manager"><meta itemprop=description content="Overview Mainstream Configuration Management systems focus on full-system management, optimized for hundreds or thousands of managed resources per node. This makes them complex and dependency-heavy.
Traditional Configuration Management tools are not well suited for application managementâ€”they focus on systems management. They also struggle with ad hoc systems where each node is a unique snowflake.
CCM is a small-scale Configuration Management system designed to meet users where they are:"><meta itemprop=wordCount content="546"><title>Choria Configuration Manager</title><link href=/index.xml rel=alternate type=application/rss+xml title="Choria Configuration Manager"><link href=/index.json rel=alternate type=application/json title="Choria Configuration Manager"><link href=/css/auto-complete/auto-complete.min.css?1768842812 rel=stylesheet><script src=/js/auto-complete/auto-complete.min.js?1768842812 defer></script><script src=/js/search-lunr.min.js?1768842812 defer></script><script src=/js/search.min.js?1768842812 defer></script><script>window.relearn=window.relearn||{},window.relearn.index_js_url="/searchindex.en.js?1768842812"</script><script src=/js/lunr/lunr.min.js?1768842812 defer></script><script src=/js/lunr/lunr.stemmer.support.min.js?1768842812 defer></script><script src=/js/lunr/lunr.multi.min.js?1768842812 defer></script><script src=/js/lunr/lunr.en.min.js?1768842812 defer></script><script>window.relearn=window.relearn||{},window.relearn.contentLangs=["en"]</script><link href=/fonts/fontawesome/css/fontawesome-all.min.css?1768842812 rel=stylesheet media=print onload='this.media="all",this.onload=null'><noscript><link href=/fonts/fontawesome/css/fontawesome-all.min.css?1768842812 rel=stylesheet></noscript><link href=/css/perfect-scrollbar/perfect-scrollbar.min.css?1768842812 rel=stylesheet><link href=/css/theme.min.css?1768842812 rel=stylesheet><link href=/css/format-html.min.css?1768842812 rel=stylesheet id=R-format-style><script>window.relearn=window.relearn||{},window.relearn.min=`.min`,window.relearn.path="/index.html",window.relearn.relBasePath=".",window.relearn.relBaseUri=".",window.relearn.absBaseUri="https://choria-cm.dev",window.relearn.disableInlineCopyToClipboard=!0,window.relearn.enableBlockCodeWrap=!0,window.relearn.getItem=(e,t)=>e.getItem(t),window.relearn.setItem=(e,t,n)=>e.setItem(t,n),window.relearn.removeItem=(e,t)=>e.removeItem(t),window.T_Copy_to_clipboard=`Copy text to clipboard`,window.T_Copied_to_clipboard=`Text copied to clipboard!`,window.T_Link_copied_to_clipboard=`Link copied to clipboard!`,window.T_Reset_view=`Reset view`,window.T_View_reset=`View reset!`,window.T_No_results_found=`No results found for "{0}"`,window.T_N_results_found=`{1} results found for "{0}"`,window.T_Browser_unsupported_feature=`This browser doesn't support this feature`,window.relearn.themevariants=["zen-auto","zen-light","ccm"],window.relearn.customvariantname="my-custom-variant",window.relearn.changeVariant=function(e){var t=document.documentElement.dataset.rThemeVariant;window.relearn.setItem(window.localStorage,window.relearn.absBaseUri+"/variant",e),document.documentElement.dataset.rThemeVariant=e,t!=e&&(document.dispatchEvent(new CustomEvent("themeVariantLoaded",{detail:{variant:e,oldVariant:t}})),window.relearn.markVariant())},window.relearn.markVariant=function(){var e=window.relearn.getItem(window.localStorage,window.relearn.absBaseUri+"/variant");document.querySelectorAll(".R-variantswitcher select").forEach(t=>{t.value=e})},window.relearn.initVariant=function(){var e=window.relearn.getItem(window.localStorage,window.relearn.absBaseUri+"/variant")??"";e==window.relearn.customvariantname||(!e||!window.relearn.themevariants.includes(e))&&(e=window.relearn.themevariants[0],window.relearn.setItem(window.localStorage,window.relearn.absBaseUri+"/variant",e)),document.documentElement.dataset.rThemeVariant=e},window.relearn.initVariant(),window.relearn.markVariant()</script><script src=https://cdn.counter.dev/script.js data-id=a4622abe-f6fa-4cac-a337-a4437915e4b3></script></head><body class="mobile-support html" data-url=/index.html><div id=R-body class=default-animation><div id=R-body-overlay></div><nav id=R-topbar><div class=topbar-wrapper><div class=topbar-sidebar-divider></div><div class="topbar-area topbar-area-start" data-area=start><div class="topbar-button topbar-button-sidebar" data-content-empty=disable data-width-s=show data-width-m=hide data-width-l=hide><span class="btn cstyle button link noborder notitle interactive"><button onclick=toggleNav() type=button title="Menu (CTRL+ALT+n)"><i class="fa-fw fas fa-bars"></i></button></span></div><div class="topbar-button topbar-button-toc" data-content-empty=hide data-width-s=show data-width-m=show data-width-l=show><span class="btn cstyle button link noborder notitle interactive"><button onclick=toggleTopbarFlyout(this) type=button title="Table of Contents (CTRL+ALT+t)"><i class="fa-fw fas fa-list-alt"></i></button></span><div class=topbar-content><div class=topbar-content-wrapper><nav class=TableOfContents><ul><li><a href=#overview>Overview</a></li><li><a href=#status>Status</a></li><li><a href=#examples>Examples</a><ul><li><a href=#shell-example>Shell Example</a></li><li><a href=#manifest-example>Manifest Example</a></li></ul></li></ul></nav></div></div></div></div><ol class="topbar-breadcrumbs breadcrumbs highlightable" itemscope itemtype=http://schema.org/BreadcrumbList><li itemscope itemtype=https://schema.org/ListItem itemprop=itemListElement><span itemprop=name>Choria Configuration Manager</span><meta itemprop=position content="1"></li></ol><div class="topbar-area topbar-area-end" data-area=end><div class="topbar-button topbar-button-prev" data-content-empty=disable data-width-s=show data-width-m=show data-width-l=show><span class="btn cstyle button link noborder notitle"><span><i class="fa-fw fas fa-chevron-left"></i></span></span></div><div class="topbar-button topbar-button-next" data-content-empty=disable data-width-s=show data-width-m=show data-width-l=show><span class="btn cstyle button link noborder notitle interactive"><a href=/resources/index.html title="Resources (ðŸ¡’)"><i class="fa-fw fas fa-chevron-right"></i></a></span></div><div class="topbar-button topbar-button-more" data-content-empty=hide data-width-s=show data-width-m=show data-width-l=show><span class="btn cstyle button link noborder notitle interactive"><button onclick=toggleTopbarFlyout(this) type=button title=More><i class="fa-fw fas fa-ellipsis-v"></i></button></span><div class=topbar-content><div class=topbar-content-wrapper><div class="topbar-area topbar-area-more" data-area=more></div></div></div></div></div></div></nav><div id=R-main-overlay></div><main id=R-body-inner class="highlightable page" tabindex=-1><div class=flex-block-wrapper><article class=default><header class=headline></header><h1 id=choria-configuration-manager>Choria Configuration Manager</h1><h2 id=overview>Overview<span class="btn cstyle anchor copyanchor scrollanchor link noborder notitle interactive"><button type=button title="Copy link to clipboard"><i class="fa-fw fas fa-link fa-lg"></i></button></span></h2><p>Mainstream Configuration Management systems focus on full-system management, optimized for hundreds or thousands of managed resources per node. This makes them complex and dependency-heavy.</p><p>Traditional Configuration Management tools are not well suited for application managementâ€”they focus on systems management. They also struggle with ad hoc systems where each node is a unique snowflake.</p><p>CCM is a small-scale Configuration Management system designed to meet users where they are:</p><ul><li>Focused on the needs of a single application (think of it as a single module)</li><li>Excel at bringing Configuration Management to ad-hoc and snowflake use cases like personal virtual machines and laptops</li><li>Supports hierarchical data similar to Hiera, with a focus on single-file manifests and simple data structures</li><li>No dependencies for the binaries to operate other than your OS</li><li>Designed to work at a first-class level in many environments:<ul><li>Command line</li><li>Shell scripts</li><li>Single-file manifests in YAML format, run manually or continuously</li><li>Choria Autonomous Agents</li><li>Choria RPC</li><li>Embedded in Go applications</li></ul></li></ul><h2 id=status>Status<span class="btn cstyle anchor copyanchor scrollanchor link noborder notitle interactive"><button type=button title="Copy link to clipboard"><i class="fa-fw fas fa-link fa-lg"></i></button></span></h2><p>This is experimental and a work in progress. Currently, only <code>exec</code>, <code>file</code>, <code>service</code>, and <code>package</code> resources are implemented, with support limited to <code>dnf</code> and <code>systemd</code>.</p><p>The CLI and shell interaction have reached a mature state. Next, we&rsquo;re exploring network-related features and deeper monitoring integration.</p><p>Manifests are supported in YAML format and can be run manually or continuously using an agent. Manifests and data can be stored in key-value and object stores.</p><h2 id=examples>Examples<span class="btn cstyle anchor copyanchor scrollanchor link noborder notitle interactive"><button type=button title="Copy link to clipboard"><i class="fa-fw fas fa-link fa-lg"></i></button></span></h2><h3 id=shell-example>Shell Example<span class="btn cstyle anchor copyanchor scrollanchor link noborder notitle interactive"><button type=button title="Copy link to clipboard"><i class="fa-fw fas fa-link fa-lg"></i></button></span></h3><p>Here we do a package-config-service style deployment using a shell script. The script is safe to run multiple times as the CCM commands are all idempotent.</p><div class="highlight actionbar-wrapper wrap-code" dir=auto><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span><span style=color:#75715e>#!/bin/bash
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>
</span></span><span style=display:flex><span>eval <span style=color:#66d9ef>$(</span>ccm session new<span style=color:#66d9ef>)</span>
</span></span><span style=display:flex><span>ccm ensure package httpd
</span></span><span style=display:flex><span>ccm ensure file /etc/httpd/conf.d/listen.conf content<span style=color:#f92672>=</span><span style=color:#e6db74>&#34;Listen 8080&#34;</span>
</span></span><span style=display:flex><span>ccm ensure service httpd --subscribe file#/etc/httpd/conf.d/listen.conf
</span></span><span style=display:flex><span>ccm session report</span></span></code></pre></div><p>When run, this will create a session in a temporary directory and manage the resources. If the file resource changes after initial deployment, the service will restart.</p><p>A major problem with shell-based Configuration Management is that scripts often cannot be run multiple times to repair issues. This is why idempotence was invented in Configuration Management tools. They work not by being told exactly what to do, but rather by understanding the desired state and determining how to achieve it.</p><p>Idempotence is key to making rerunnable scripts for Configuration Management. By making the <code>ccm ensure</code> commands idempotent, we enable shell scripts to be used in this space as one would use traditional Configuration Management tools.</p><p>We support dynamic data on the CLI, <code>ccm</code> will read <code>.env</code> files and <code>.hiera</code> files and feed that into the runtime data. Using this even shell scripts can easily gain access to rich data.</p><div class="highlight actionbar-wrapper wrap-code" dir=auto><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span>$ cat .env
</span></span><span style=display:flex><span>package_name<span style=color:#f92672>=</span><span style=color:#e6db74>&#34;httpd&#34;</span>
</span></span><span style=display:flex><span>$ ccm ensure package <span style=color:#e6db74>&#39;{{ Data.package_name }}&#39;</span>
</span></span><span style=display:flex><span> INFO  package#httpd stable ensure<span style=color:#f92672>=</span>present runtime<span style=color:#f92672>=</span>8ms provider<span style=color:#f92672>=</span>dnf</span></span></code></pre></div><h3 id=manifest-example>Manifest Example<span class="btn cstyle anchor copyanchor scrollanchor link noborder notitle interactive"><button type=button title="Copy link to clipboard"><i class="fa-fw fas fa-link fa-lg"></i></button></span></h3><p>Taking the example above, here is what it looks like in a manifest, complete with multi-OS support:</p><div class="highlight actionbar-wrapper wrap-code" dir=auto><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-yaml data-lang=yaml><span style=display:flex><span><span style=color:#f92672>data</span>:
</span></span><span style=display:flex><span>  <span style=color:#f92672>package_name</span>: <span style=color:#ae81ff>httpd</span>
</span></span><span style=display:flex><span>  <span style=color:#f92672>service_name</span>: <span style=color:#ae81ff>httpd</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#f92672>ccm</span>:
</span></span><span style=display:flex><span>  <span style=color:#f92672>resources</span>:
</span></span><span style=display:flex><span>    - <span style=color:#f92672>package</span>:
</span></span><span style=display:flex><span>        - <span style=color:#e6db74>&#34;{{ Data.package_name }}&#34;</span>:
</span></span><span style=display:flex><span>            <span style=color:#f92672>ensure</span>: <span style=color:#ae81ff>present</span>
</span></span><span style=display:flex><span>    - <span style=color:#f92672>file</span>: 
</span></span><span style=display:flex><span>        - <span style=color:#e6db74>&#34;/etc/httpd/conf.d/listen.conf&#34;</span>:
</span></span><span style=display:flex><span>            <span style=color:#f92672>ensure</span>: <span style=color:#ae81ff>present</span>
</span></span><span style=display:flex><span>            <span style=color:#f92672>content</span>: |<span style=color:#e6db74>
</span></span></span><span style=display:flex><span><span style=color:#e6db74>                Listen 8080</span>
</span></span><span style=display:flex><span>    - <span style=color:#f92672>service</span>:
</span></span><span style=display:flex><span>        - <span style=color:#e6db74>&#34;{{ Data.service_name }}&#34;</span>:
</span></span><span style=display:flex><span>            <span style=color:#f92672>ensure</span>: <span style=color:#ae81ff>running</span>
</span></span><span style=display:flex><span>            <span style=color:#f92672>enable</span>: <span style=color:#66d9ef>true</span>
</span></span><span style=display:flex><span>            <span style=color:#f92672>subscribe</span>: 
</span></span><span style=display:flex><span>              - <span style=color:#ae81ff>file#/etc/httpd/conf.d/listen.conf</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#f92672>hierarchy</span>:
</span></span><span style=display:flex><span>  <span style=color:#f92672>order</span>:
</span></span><span style=display:flex><span>    - <span style=color:#ae81ff>os:{{ lookup(&#39;facts.host.info.platformFamily&#39;) }}</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#f92672>overrides</span>:
</span></span><span style=display:flex><span>  <span style=color:#f92672>os:debian</span>:
</span></span><span style=display:flex><span>    <span style=color:#f92672>package_name</span>: <span style=color:#ae81ff>apache2</span>
</span></span><span style=display:flex><span>    <span style=color:#f92672>service_name</span>: <span style=color:#ae81ff>apache2</span></span></span></code></pre></div><p>Here we define the inputs in <code>data</code> and the Hiera hierarchy along with OS-specific overrides. The data is referenced in the manifest using the <code>{{ Data.package_name }}</code> syntax.</p><footer class=footline></footer></article></div></main></div><aside id=R-sidebar class=default-animation><div id=R-header-topbar class=default-animation></div><div id=R-header-wrapper class=default-animation><div id=R-header class=default-animation><img src=/logo.png></div><search><form action=/search/index.html method=get><div class="searchbox default-animation"><button class=search-detail type=submit title="Search (CTRL+ALT+f)"><i class="fas fa-search"></i></button>
<label class=a11y-only for=R-search-by>Search</label>
<input data-search-input id=R-search-by name=search-by class=search-by type=search placeholder=Search...>
<button class=search-clear type=button data-search-clear title="Clear search"><i class="fas fa-times" title="Clear search"></i></button></div></form></search></div><div id=R-homelinks class="default-animation homelinks"><div class="R-menu-divider default-animation"><hr class=padding></div><div class="R-sidebarmenu R-shortcutmenu-homelinks"><ul class="space collapsible-menu"><li class=active data-nav-url=/index.html><a class=padding href=/index.html><i class="fa-fw fas fa-home"></i> Home</a></li></ul></div><div class="R-menu-divider default-animation"><hr class=padding></div><div class="R-sidebarmenu R-shortcutmenu-headercontrols"><ul></ul></div><div class="R-menu-divider default-animation"><hr class=padding></div></div><div id=R-content-wrapper class=highlightable><div class="R-sidebarmenu R-shortcutmenu-main"><ul class="enlarge morespace collapsible-menu"><li data-nav-url=/resources/index.html><a class=padding href=/resources/index.html><b>1. </b>Resources</a></li><li data-nav-url=/hiera/index.html><a class=padding href=/hiera/index.html><b>2. </b>Hierarchical Data</a></li><li data-nav-url=/data/index.html><a class=padding href=/data/index.html><b>3. </b>Data</a></li><li class=alwaysopen data-nav-url=/cli/index.html><input type=checkbox id=R-section-4fd2725e492e69224fa1e9952b51cf04 aria-controls=R-subsections-4fd2725e492e69224fa1e9952b51cf04 checked><label for=R-section-4fd2725e492e69224fa1e9952b51cf04><i class="fa-fw fas fa-chevron-right"></i><span class=a11y-only>Submenu Shell Usage</span></label><a class=padding href=/cli/index.html><b>4. </b>Shell Usage</a><ul id=R-subsections-4fd2725e492e69224fa1e9952b51cf04 class=collapsible-menu><li data-nav-url=/cli/plugins/index.html><a class=padding href=/cli/plugins/index.html>CLI Plugins</a></li></ul></li><li data-nav-url=/yamlmanifests/index.html><a class=padding href=/yamlmanifests/index.html><b>5. </b>YAML Manifests</a></li><li data-nav-url=/agent/index.html><a class=padding href=/agent/index.html><b>6. </b>Agent</a></li><li data-nav-url=/monitoring/index.html><a class=padding href=/monitoring/index.html><b>7. </b>Monitoring</a></li></ul></div><div class="R-sidebarmenu R-shortcutmenu-shortcuts"><div class="nav-title padding">More</div><ul class="space collapsible-menu"><li data-nav-url=https://github.com/choria-io/ccm><a class=padding href=https://github.com/choria-io/ccm rel=external><i class='fab fa-fw fa-github'></i> GitHub</a></li><li data-nav-url=https://github.com/choria-io/ccm/releases><a class=padding href=https://github.com/choria-io/ccm/releases rel=external><i class='far fa-save'></i> Download</a></li><li data-nav-url=https://github.com/choria-io/ccm/discussions><a class=padding href=https://github.com/choria-io/ccm/discussions rel=external><i class='far fa-comments'></i> Discussions</a></li><li data-nav-url=https://github.com/choria-io/ccm/issues><a class=padding href=https://github.com/choria-io/ccm/issues rel=external><i class='far fa-life-ring'></i> Issues</a></li><li data-nav-url=https://short.voxpupu.li/puppetcommunity_slack_signup><a class=padding href=https://short.voxpupu.li/puppetcommunity_slack_signup rel=external><i class='fab fa-slack'></i> #choria</a></li></ul></div><div id=R-footer-margin></div><div class="R-menu-divider default-animation"><hr class=padding></div><div class="R-sidebarmenu R-shortcutmenu-footercontrols"><ul><li class=R-variantswitcher><div class="padding menu-control"><i class="fa-fw fas fa-paint-brush"></i>
<span>&nbsp;</span><div class=control-style><label class=a11y-only for=R-select-variant>Theme</label>
<select id=R-select-variant><option id=R-select-variant-zen-auto value=zen-auto selected>Auto Theme</option><option id=R-select-variant-zen-light value=zen-light>Light</option><option id=R-select-variant-ccm value=ccm>Dark</option></select></div><div class=clear></div></div><script>window.relearn.markVariant()</script></li></ul></div><div id=R-footer><p>Built with <a href=https://github.com/McShelby/hugo-theme-relearn title=love><i class="fas fa-heart"></i></a> by <a href=https://gohugo.io/>Hugo</a></p></div></div></aside><script src=/js/perfect-scrollbar/perfect-scrollbar.min.js?1768842812 defer></script><script src=/js/theme.min.js?1768842812 defer></script><div id=toast-container role=status aria-live=polite aria-atomic=false></div></body></html>