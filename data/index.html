<!doctype html><html lang=en-us dir=ltr itemscope itemtype=http://schema.org/Article data-r-output-format=html><head><meta charset=utf-8><meta name=viewport content="height=device-height,width=device-width,initial-scale=1,minimum-scale=1"><meta name=generator content="Hugo 0.152.2"><meta name=generator content="Relearn 8.3.0"><meta name=description content="Just like applications need data to vary their behavior and configure their environments, so do Configuration Management tools.
For this reason I wrote extlookup and hiera years ago for the Puppet community. Despite the minimal focus of this tool we still need data to vary the behaviour.
Data can be used for:
Configuring resource names that differ between Operating Systems like httpd vs apache2 package names Set different configuration values depending on environment, role or other dimensions Decide if some environments shold have something installed and others not - like development vs production environments Choria CM supports various data sources:"><meta name=author content><meta name=twitter:card content="summary"><meta name=twitter:title content="Data :: Choria Configuration Manager"><meta name=twitter:description content="Just like applications need data to vary their behavior and configure their environments, so do Configuration Management tools.
For this reason I wrote extlookup and hiera years ago for the Puppet community. Despite the minimal focus of this tool we still need data to vary the behaviour.
Data can be used for:
Configuring resource names that differ between Operating Systems like httpd vs apache2 package names Set different configuration values depending on environment, role or other dimensions Decide if some environments shold have something installed and others not - like development vs production environments Choria CM supports various data sources:"><meta property="og:url" content="https://choria-io.github.io/ccm/data/index.html"><meta property="og:site_name" content="Choria Configuration Manager"><meta property="og:title" content="Data :: Choria Configuration Manager"><meta property="og:description" content="Just like applications need data to vary their behavior and configure their environments, so do Configuration Management tools.
For this reason I wrote extlookup and hiera years ago for the Puppet community. Despite the minimal focus of this tool we still need data to vary the behaviour.
Data can be used for:
Configuring resource names that differ between Operating Systems like httpd vs apache2 package names Set different configuration values depending on environment, role or other dimensions Decide if some environments shold have something installed and others not - like development vs production environments Choria CM supports various data sources:"><meta property="og:locale" content="en_us"><meta property="og:type" content="website"><meta itemprop=name content="Data :: Choria Configuration Manager"><meta itemprop=description content="Just like applications need data to vary their behavior and configure their environments, so do Configuration Management tools.
For this reason I wrote extlookup and hiera years ago for the Puppet community. Despite the minimal focus of this tool we still need data to vary the behaviour.
Data can be used for:
Configuring resource names that differ between Operating Systems like httpd vs apache2 package names Set different configuration values depending on environment, role or other dimensions Decide if some environments shold have something installed and others not - like development vs production environments Choria CM supports various data sources:"><meta itemprop=wordCount content="455"><title>Data :: Choria Configuration Manager</title><link href=https://choria-io.github.io/ccm/data/index.xml rel=alternate type=application/rss+xml title="Data :: Choria Configuration Manager"><link href=https://choria-io.github.io/ccm/css/auto-complete/auto-complete.min.css?1766946493 rel=stylesheet><script src=https://choria-io.github.io/ccm/js/auto-complete/auto-complete.min.js?1766946493 defer></script><script src=https://choria-io.github.io/ccm/js/search-lunr.min.js?1766946493 defer></script><script src=https://choria-io.github.io/ccm/js/search.min.js?1766946493 defer></script><script>window.relearn=window.relearn||{},window.relearn.index_js_url="https://choria-io.github.io/ccm/searchindex.en.js?1766946493"</script><script src=https://choria-io.github.io/ccm/js/lunr/lunr.min.js?1766946493 defer></script><script src=https://choria-io.github.io/ccm/js/lunr/lunr.stemmer.support.min.js?1766946493 defer></script><script src=https://choria-io.github.io/ccm/js/lunr/lunr.multi.min.js?1766946493 defer></script><script src=https://choria-io.github.io/ccm/js/lunr/lunr.en.min.js?1766946493 defer></script><script>window.relearn=window.relearn||{},window.relearn.contentLangs=["en"]</script><link href=https://choria-io.github.io/ccm/fonts/fontawesome/css/fontawesome-all.min.css?1766946493 rel=stylesheet media=print onload='this.media="all",this.onload=null'><noscript><link href=https://choria-io.github.io/ccm/fonts/fontawesome/css/fontawesome-all.min.css?1766946493 rel=stylesheet></noscript><link href=https://choria-io.github.io/ccm/css/perfect-scrollbar/perfect-scrollbar.min.css?1766946493 rel=stylesheet><link href=https://choria-io.github.io/ccm/css/theme.min.css?1766946493 rel=stylesheet><link href=https://choria-io.github.io/ccm/css/format-html.min.css?1766946493 rel=stylesheet id=R-format-style><script>window.relearn=window.relearn||{},window.relearn.min=`.min`,window.relearn.path="/data/index.html",window.relearn.relBasePath="..",window.relearn.relBaseUri="..",window.relearn.absBaseUri="https://choria-io.github.io/ccm",window.relearn.disableInlineCopyToClipboard=!0,window.relearn.enableBlockCodeWrap=!0,window.relearn.getItem=(e,t)=>e.getItem(t),window.relearn.setItem=(e,t,n)=>e.setItem(t,n),window.relearn.removeItem=(e,t)=>e.removeItem(t),window.T_Copy_to_clipboard=`Copy text to clipboard`,window.T_Copied_to_clipboard=`Text copied to clipboard!`,window.T_Link_copied_to_clipboard=`Link copied to clipboard!`,window.T_Reset_view=`Reset view`,window.T_View_reset=`View reset!`,window.T_No_results_found=`No results found for "{0}"`,window.T_N_results_found=`{1} results found for "{0}"`,window.T_Browser_unsupported_feature=`This browser doesn't support this feature`,window.relearn.themevariants=["zen-auto","zen-light","ccm"],window.relearn.customvariantname="my-custom-variant",window.relearn.changeVariant=function(e){var t=document.documentElement.dataset.rThemeVariant;window.relearn.setItem(window.localStorage,window.relearn.absBaseUri+"/variant",e),document.documentElement.dataset.rThemeVariant=e,t!=e&&(document.dispatchEvent(new CustomEvent("themeVariantLoaded",{detail:{variant:e,oldVariant:t}})),window.relearn.markVariant())},window.relearn.markVariant=function(){var e=window.relearn.getItem(window.localStorage,window.relearn.absBaseUri+"/variant");document.querySelectorAll(".R-variantswitcher select").forEach(t=>{t.value=e})},window.relearn.initVariant=function(){var e=window.relearn.getItem(window.localStorage,window.relearn.absBaseUri+"/variant")??"";e==window.relearn.customvariantname||(!e||!window.relearn.themevariants.includes(e))&&(e=window.relearn.themevariants[0],window.relearn.setItem(window.localStorage,window.relearn.absBaseUri+"/variant",e)),document.documentElement.dataset.rThemeVariant=e},window.relearn.initVariant(),window.relearn.markVariant()</script><script src=https://cdn.counter.dev/script.js data-id=a4622abe-f6fa-4cac-a337-a4437915e4b3></script></head><body class="mobile-support html" data-url=https://choria-io.github.io/ccm/data/index.html><div id=R-body class=default-animation><div id=R-body-overlay></div><nav id=R-topbar><div class=topbar-wrapper><div class=topbar-sidebar-divider></div><div class="topbar-area topbar-area-start" data-area=start><div class="topbar-button topbar-button-sidebar" data-content-empty=disable data-width-s=show data-width-m=hide data-width-l=hide><span class="btn cstyle button link noborder notitle interactive"><button onclick=toggleNav() type=button title="Menu (CTRL+ALT+n)"><i class="fa-fw fas fa-bars"></i></button></span></div><div class="topbar-button topbar-button-toc" data-content-empty=hide data-width-s=show data-width-m=show data-width-l=show><span class="btn cstyle button link noborder notitle interactive"><button onclick=toggleTopbarFlyout(this) type=button title="Table of Contents (CTRL+ALT+t)"><i class="fa-fw fas fa-list-alt"></i></button></span><div class=topbar-content><div class=topbar-content-wrapper><nav class=TableOfContents><ul><li><a href=#accessing-data>Accessing Data</a></li><li><a href=#facts>Facts</a></li><li><a href=#hiera-data-for-cli>Hiera Data for CLI</a></li><li><a href=#environment>Environment</a></li></ul></nav></div></div></div></div><ol class="topbar-breadcrumbs breadcrumbs highlightable" itemscope itemtype=http://schema.org/BreadcrumbList><li itemscope itemtype=https://schema.org/ListItem itemprop=itemListElement><a itemprop=item href=https://choria-io.github.io/ccm/index.html><span itemprop=name>Choria Configuration Manager</span></a><meta itemprop=position content="1">&nbsp;>&nbsp;</li><li itemscope itemtype=https://schema.org/ListItem itemprop=itemListElement><span itemprop=name>Data</span><meta itemprop=position content="2"></li></ol><div class="topbar-area topbar-area-end" data-area=end><div class="topbar-button topbar-button-prev" data-content-empty=disable data-width-s=show data-width-m=show data-width-l=show><span class="btn cstyle button link noborder notitle interactive"><a href=https://choria-io.github.io/ccm/hiera/index.html title="Hierarchical Data (ðŸ¡)"><i class="fa-fw fas fa-chevron-left"></i></a></span></div><div class="topbar-button topbar-button-next" data-content-empty=disable data-width-s=show data-width-m=show data-width-l=show><span class="btn cstyle button link noborder notitle interactive"><a href=https://choria-io.github.io/ccm/cli/index.html title="CLI Usage (ðŸ¡’)"><i class="fa-fw fas fa-chevron-right"></i></a></span></div><div class="topbar-button topbar-button-more" data-content-empty=hide data-width-s=show data-width-m=show data-width-l=show><span class="btn cstyle button link noborder notitle interactive"><button onclick=toggleTopbarFlyout(this) type=button title=More><i class="fa-fw fas fa-ellipsis-v"></i></button></span><div class=topbar-content><div class=topbar-content-wrapper><div class="topbar-area topbar-area-more" data-area=more></div></div></div></div></div></div></nav><div id=R-main-overlay></div><main id=R-body-inner class="highlightable data" tabindex=-1><div class=flex-block-wrapper><article class=default><header class=headline></header><h1 id=data>Data</h1><p>Just like applications need data to vary their behavior and configure their environments, so do Configuration Management tools.</p><p>For this reason I wrote <code>extlookup</code> and <code>hiera</code> years ago for the Puppet community. Despite the minimal focus of this tool we still need data to vary the behaviour.</p><p>Data can be used for:</p><ul><li>Configuring resource names that differ between Operating Systems like <code>httpd</code> vs <code>apache2</code> package names</li><li>Set different configuration values depending on environment, role or other dimensions</li><li>Decide if some environments shold have something installed and others not - like development vs production environments</li></ul><p>Choria CM supports various data sources:</p><ul><li><strong>Facts</strong> about the instance - the Operating System, Networking and Disk configuration</li><li><strong>Environment</strong> data like variables read from the shell environment and files like <code>./.env</code></li><li><strong>Hiera Data</strong> data resolved using Hiera that supports hierarchical overrides based on facts</li></ul><h2 id=accessing-data>Accessing Data<span class="btn cstyle anchor copyanchor scrollanchor link noborder notitle interactive"><button type=button title="Copy link to clipboard"><i class="fa-fw fas fa-link fa-lg"></i></button></span></h2><p>In these examples you&rsquo;ll see expressions like <code>{{ lookup('facts.host.info.platformFamily') }}</code>, these are written using Expr Language:</p><ul><li><a href=https://expr-lang.org/#documentation rel=external>Expr Language</a></li><li><a href=https://expr-lang.org/docs/language-definition rel=external>Expr Language Documentation</a></li></ul><p>We&rsquo;ve added the following functions to Expr:</p><table><thead><tr><th>Function</th><th>Description</th></tr></thead><tbody><tr><td><code>lookup(key, default)</code></td><td>Lookup data from the runtime environment using <a href=https://github.com/tidwall/gjson/blob/master/SYNTAX.md rel=external>GJSON Path Syntax</a></td></tr><tr><td><code>readFile(file)</code></td><td>Read a file into a string, can only read files in the working directory</td></tr><tr><td><code>template(f)</code></td><td>Parses <code>f</code> using templates</td></tr><tr><td><code>jet(f)</code>, <code>jet(f, "[[", "]]")</code></td><td>Parses <code>f</code> using <a href=https://github.com/CloudyKit/jet/blob/master/docs/syntax.md rel=external>Jet templates</a>, optionally specifying delimiters</td></tr></tbody></table><p>These expressions can be used in Hiera Data and even on the CLI.</p><div class="highlight actionbar-wrapper wrap-code" dir=auto><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span>$ ccm ensure package <span style=color:#e6db74>&#39;{{ lookup(&#34;data.package_name&#34;, &#34;httpd&#34;) }}&#39;</span></span></span></code></pre></div><p>Above will fetch data from the runtime environment and default to <code>httpd</code> if not found.</p><h2 id=facts>Facts<span class="btn cstyle anchor copyanchor scrollanchor link noborder notitle interactive"><button type=button title="Copy link to clipboard"><i class="fa-fw fas fa-link fa-lg"></i></button></span></h2><p>We have a built-in fact resolver that gathers system information, we intend to expand this a bit, but today just the basic system facts are available.</p><p>To see the available facts, run:</p><div class="highlight actionbar-wrapper wrap-code" dir=auto><pre tabindex=0><code class=language-nohighlight data-lang=nohighlight>$ ccm facts
$ ccm facts host
$ ccm facts --yaml</code></pre></div><p>Accessing facts is via the expressions like <code>{{ lookup('facts.host.info.platformFamily') }}</code>.</p><h2 id=hiera-data-for-cli>Hiera Data for CLI<span class="btn cstyle anchor copyanchor scrollanchor link noborder notitle interactive"><button type=button title="Copy link to clipboard"><i class="fa-fw fas fa-link fa-lg"></i></button></span></h2><p>Hiera Data is resolved using Choria Hierarchical Data Resolver and are ready by default from <code>./.hiera</code> or a file you choose.</p><details open class="box cstyle notices info"><summary class=box-label tabindex=-1><i class="fa-fw fas fa-info-circle"></i>
Note</summary><div class=box-content><p>This only works for <code>ccm ensure</code>, since apply is a Hiera manifest on it&rsquo;s own it does not need this behavior</p></div></details><p>Given this example file stored in <code>./.hiera</code>:</p><div class="highlight actionbar-wrapper wrap-code" dir=auto><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-yaml data-lang=yaml><span style=display:flex><span><span style=color:#f92672>hierarchy</span>:
</span></span><span style=display:flex><span>  <span style=color:#f92672>order</span>:
</span></span><span style=display:flex><span>    - <span style=color:#ae81ff>os:{{ lookup(&#39;facts.host.info.PlatformFamily&#39;) }}</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#f92672>data</span>:
</span></span><span style=display:flex><span>  <span style=color:#f92672>package_name</span>: <span style=color:#e6db74>&#34;&#34;</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#f92672>overrides</span>:
</span></span><span style=display:flex><span>  <span style=color:#f92672>os:debian</span>:
</span></span><span style=display:flex><span>    <span style=color:#f92672>package_name</span>: <span style=color:#ae81ff>apache2</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>  <span style=color:#f92672>os:rhel</span>:
</span></span><span style=display:flex><span>    <span style=color:#f92672>package_name</span>: <span style=color:#ae81ff>httpd</span></span></span></code></pre></div><p>Running <code>ccm ensure package '{{ lookup("data.package_name") }}'</code> will install <code>httpd</code> on RHEL based systems and <code>apache2</code> on Debian based systems.</p><details open class="box cstyle notices info"><summary class=box-label tabindex=-1><i class="fa-fw fas fa-info-circle"></i>
Note</summary><div class=box-content><p>See the <a href=https://choria-io.github.io/ccm/hiera/index.html>Hiera</a> section for details on how to configure Hiera Data in NATS</p></div></details><p>The data can also be stored in a NATS Key-Value store and read from there instead of from <code>./hiera</code> by passing <code>--context</code> and <code>--hiera kv://BUCKET/key</code> options.</p><h2 id=environment>Environment<span class="btn cstyle anchor copyanchor scrollanchor link noborder notitle interactive"><button type=button title="Copy link to clipboard"><i class="fa-fw fas fa-link fa-lg"></i></button></span></h2><p>The shell environment and any environment data defined in <code>./.env</code> can be accessed via expressions like <code>{{ lookup("env.MY_VAR") }}</code></p><footer class=footline></footer></article></div></main></div><aside id=R-sidebar class=default-animation><div id=R-header-topbar class=default-animation></div><div id=R-header-wrapper class=default-animation><div id=R-header class=default-animation><img src=https://choria-io.github.io/ccm/logo.png></div><search><form action=https://choria-io.github.io/ccm/search/index.html method=get><div class="searchbox default-animation"><button class=search-detail type=submit title="Search (CTRL+ALT+f)"><i class="fas fa-search"></i></button>
<label class=a11y-only for=R-search-by>Search</label>
<input data-search-input id=R-search-by name=search-by class=search-by type=search placeholder=Search...>
<button class=search-clear type=button data-search-clear title="Clear search"><i class="fas fa-times" title="Clear search"></i></button></div></form></search></div><div id=R-homelinks class="default-animation homelinks"><div class="R-menu-divider default-animation"><hr class=padding></div><div class="R-sidebarmenu R-shortcutmenu-homelinks"><ul class="space collapsible-menu"><li data-nav-url=https://choria-io.github.io/ccm/index.html><a class=padding href=https://choria-io.github.io/ccm/index.html><i class="fa-fw fas fa-home"></i> Home</a></li></ul></div><div class="R-menu-divider default-animation"><hr class=padding></div><div class="R-sidebarmenu R-shortcutmenu-headercontrols"><ul></ul></div><div class="R-menu-divider default-animation"><hr class=padding></div></div><div id=R-content-wrapper class=highlightable><div class="R-sidebarmenu R-shortcutmenu-main"><ul class="enlarge morespace collapsible-menu"><li data-nav-url=https://choria-io.github.io/ccm/resources/index.html><a class=padding href=https://choria-io.github.io/ccm/resources/index.html><b>1. </b>Resources</a></li><li data-nav-url=https://choria-io.github.io/ccm/hiera/index.html><a class=padding href=https://choria-io.github.io/ccm/hiera/index.html><b>2. </b>Hierarchical Data</a></li><li class=active data-nav-url=https://choria-io.github.io/ccm/data/index.html><a class=padding href=https://choria-io.github.io/ccm/data/index.html><b>3. </b>Data</a></li><li data-nav-url=https://choria-io.github.io/ccm/cli/index.html><a class=padding href=https://choria-io.github.io/ccm/cli/index.html><b>4. </b>CLI Usage</a></li><li data-nav-url=https://choria-io.github.io/ccm/yamlmanifests/index.html><a class=padding href=https://choria-io.github.io/ccm/yamlmanifests/index.html><b>5. </b>YAML Manifests</a></li><li data-nav-url=https://choria-io.github.io/ccm/monitoring/index.html><a class=padding href=https://choria-io.github.io/ccm/monitoring/index.html><b>6. </b>Monitoring</a></li></ul></div><div class="R-sidebarmenu R-shortcutmenu-shortcuts"><div class="nav-title padding">More</div><ul class="space collapsible-menu"><li data-nav-url=https://github.com/choria-io/ccm><a class=padding href=https://github.com/choria-io/ccm rel=external><i class='fab fa-fw fa-github'></i> GitHub</a></li><li data-nav-url=https://github.com/choria-io/ccm/releases><a class=padding href=https://github.com/choria-io/ccm/releases rel=external><i class='far fa-save'></i> Download</a></li><li data-nav-url=https://github.com/choria-io/ccm/discussions><a class=padding href=https://github.com/choria-io/ccm/discussions rel=external><i class='far fa-comments'></i> Discussions</a></li><li data-nav-url=https://github.com/choria-io/ccm/issues><a class=padding href=https://github.com/choria-io/ccm/issues rel=external><i class='far fa-life-ring'></i> Issues</a></li><li data-nav-url=https://short.voxpupu.li/puppetcommunity_slack_signup><a class=padding href=https://short.voxpupu.li/puppetcommunity_slack_signup rel=external><i class='fab fa-slack'></i> #choria</a></li></ul></div><div id=R-footer-margin></div><div class="R-menu-divider default-animation"><hr class=padding></div><div class="R-sidebarmenu R-shortcutmenu-footercontrols"><ul><li class=R-variantswitcher><div class="padding menu-control"><i class="fa-fw fas fa-paint-brush"></i>
<span>&nbsp;</span><div class=control-style><label class=a11y-only for=R-select-variant>Theme</label>
<select id=R-select-variant><option id=R-select-variant-zen-auto value=zen-auto selected>Auto Theme</option><option id=R-select-variant-zen-light value=zen-light>Light</option><option id=R-select-variant-ccm value=ccm>Dark</option></select></div><div class=clear></div></div><script>window.relearn.markVariant()</script></li></ul></div><div id=R-footer><p>Built with <a href=https://github.com/McShelby/hugo-theme-relearn title=love><i class="fas fa-heart"></i></a> by <a href=https://gohugo.io/>Hugo</a></p></div></div></aside><script src=https://choria-io.github.io/ccm/js/perfect-scrollbar/perfect-scrollbar.min.js?1766946493 defer></script><script src=https://choria-io.github.io/ccm/js/theme.min.js?1766946493 defer></script><div id=toast-container role=status aria-live=polite aria-atomic=false></div></body></html>