<?xml version="1.0" encoding="utf-8" standalone="yes"?><rss version="2.0" xmlns:atom="http://www.w3.org/2005/Atom"><channel><title>Design Documents :: Choria Configuration Manager</title><link>https://choria-cm.dev/design/index.html</link><description>LLM generated design documents for resources</description><generator>Hugo</generator><language>en-us</language><atom:link href="https://choria-cm.dev/design/index.xml" rel="self" type="application/rss+xml"/><item><title>Archive Type</title><link>https://choria-cm.dev/design/archive/index.html</link><pubDate>Mon, 01 Jan 0001 00:00:00 +0000</pubDate><guid>https://choria-cm.dev/design/archive/index.html</guid><description>This document describes the design of the archive resource type for downloading and extracting archives.
Overview The archive resource manages remote archives with three phases:
Download: Fetch archive from a URL to local filesystem Extract: Unpack archive contents to a target directory Cleanup: Optionally remove the archive file after extraction These phases are conditional based on current state and configuration.</description></item><item><title>Exec Type</title><link>https://choria-cm.dev/design/exec/index.html</link><pubDate>Mon, 01 Jan 0001 00:00:00 +0000</pubDate><guid>https://choria-cm.dev/design/exec/index.html</guid><description>This document describes the design of the exec resource type for executing commands.
Overview The exec resource executes commands with idempotency controls:
Creates: Skip execution if a file exists Refresh Only: Only execute when triggered by a subscribed resource Exit Codes: Validate success via configurable return codes Provider Interface Exec providers must implement the ExecProvider interface:</description></item><item><title>File Type</title><link>https://choria-cm.dev/design/file/index.html</link><pubDate>Mon, 01 Jan 0001 00:00:00 +0000</pubDate><guid>https://choria-cm.dev/design/file/index.html</guid><description>This document describes the design of the file resource type for managing files and directories.
Overview The file resource manages files and directories with three aspects:
Existence: Whether the file/directory exists or is absent Content: The contents of a file (from inline content or source file) Attributes: Owner, group, and permissions Provider Interface File providers must implement the FileProvider interface:</description></item><item><title>Package Type</title><link>https://choria-cm.dev/design/package/index.html</link><pubDate>Mon, 01 Jan 0001 00:00:00 +0000</pubDate><guid>https://choria-cm.dev/design/package/index.html</guid><description>This document describes the design of the package resource type for managing software packages.
Overview The package resource manages software packages with two aspects:
Existence: Whether the package is installed or absent Version: The specific version installed (when applicable) Provider Interface Package providers must implement the PackageProvider interface:</description></item><item><title>Scaffold Type</title><link>https://choria-cm.dev/design/scaffold/index.html</link><pubDate>Mon, 01 Jan 0001 00:00:00 +0000</pubDate><guid>https://choria-cm.dev/design/scaffold/index.html</guid><description>This document describes the design of the scaffold resource type for rendering template directories into target directories.
Overview The scaffold resource renders files from a source template directory to a target directory:
Rendering: Process templates using Go text/template or Jet engine Synchronization: Detect changed, stable, and purgeable files Cleanup: Optionally remove files in the target not present in the source Templates have access to facts and data from Hiera, enabling dynamic configuration generation from directory structures.</description></item><item><title>Service Type</title><link>https://choria-cm.dev/design/service/index.html</link><pubDate>Mon, 01 Jan 0001 00:00:00 +0000</pubDate><guid>https://choria-cm.dev/design/service/index.html</guid><description>This document describes the design of the service resource type for managing system services.
Overview The service resource manages system services with two independent dimensions:
Running state: Whether the service is currently running or stopped Enabled state: Whether the service starts automatically at boot These are managed independently, allowing combinations like “running but disabled” or “stopped but enabled”.</description></item><item><title>Adding a Type</title><link>https://choria-cm.dev/design/new/index.html</link><pubDate>Mon, 01 Jan 0001 00:00:00 +0000</pubDate><guid>https://choria-cm.dev/design/new/index.html</guid><description>This guide documents the process for adding a new resource type to CCM. It uses the archive type as a reference implementation.
Overview Adding a new resource type requires changes across several packages:
Model definitions - Properties, state, and metadata structs Resource type implementation - Core logic and provider interface Provider implementation - Platform-specific operations Integration points - Factory functions and registry CLI commands - User-facing command line interface JSON schemas - Validation for manifests and API requests Documentation - User and design documentation CCM Studio - Web-based manifest designer File Checklist File Action Purpose model/resource_&lt;type&gt;.go Create Properties, state, metadata structs model/resource_&lt;type&gt;_test.go Create Property validation tests model/resource.go Modify Add case to factory function resources/&lt;type&gt;/&lt;type&gt;.go Create Provider interface definition resources/&lt;type&gt;/type.go Create Resource type implementation resources/&lt;type&gt;/type_test.go Create Resource type tests resources/&lt;type&gt;/provider_mock_test.go Generate Mock provider for tests resources/&lt;type&gt;/&lt;provider&gt;/factory.go Create Provider factory resources/&lt;type&gt;/&lt;provider&gt;/&lt;provider&gt;.go Create Provider implementation resources/&lt;type&gt;/&lt;provider&gt;/&lt;provider&gt;_test.go Create Provider tests resources/resources.go Modify Add case to NewResourceFromProperties cmd/ensure_&lt;type&gt;.go Create CLI command handler cmd/ensure.go Modify Register CLI command internal/fs/schemas/manifest.json Modify Add resource schema definitions internal/fs/schemas/resource_ensure_request.json Modify Add API request schema docs/content/resources/&lt;type&gt;.md Create User documentation docs/content/design/&lt;type&gt;/_index.md Create Design documentation docs/content/design/&lt;type&gt;/&lt;provider&gt;.md Create Provider documentation Step 1: Model Definitions Create model/resource_&lt;type&gt;.go with the following components.</description></item></channel></rss>